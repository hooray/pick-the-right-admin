
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{aA as $e,aB as Ae,aC as Ee,aD as qe,d as w,s as q,g as y,w as _,L as x,ad as F,ae as D,j as a,aE as Le,aF as Ne,r as I,a as ie,aG as _e,R as Y,U as J,X as Me,Y as Ke,aH as ze,aI as Ve,aJ as Ge,W as $,q as ue,J as xe,e as k,aK as Ue,aL as We,aM as je,aN as Xe,aO as He,aP as Ye,aQ as Je,aR as Qe,aS as Ze,aT as re,I as et,P as W,O as R,M as E,aU as tt,aV as at,ab as z,aW as ot,a2 as we,a3 as nt,aX as st,aY as rt,p as X,c as T,F as V,aa as Q,a6 as Z,af as lt,aZ as it,l as G,Q as le,i as Be,h as Pe,t as U,a_ as Se,C as Ie,b as ke,al as H,u as ut,a$ as dt,at as ne,ao as me,f as L,z as ve,am as ft,ap as ct,v as pt,ac as yt,x as _t,y as mt,D as vt}from"./index-D8kZ2dnq.js";import{R as gt}from"./RovingFocusGroup-3O4ER13-.js";import{u as ge}from"./index-mXHhBxbZ.js";import{u as bt}from"./useMainPage-Dv4Z0Tn-.js";const ht=["INPUT","TEXTAREA"];function Ct(t,o,e,n={}){if(!o||n.enableIgnoredElement&&ht.includes(o.nodeName))return null;const{arrowKeyOptions:r="both",attributeName:u="[data-reka-collection-item]",itemsArray:d=[],loop:c=!0,dir:l="ltr",preventScroll:p=!0,focus:m=!1}=n,[h,f,v,s,C,g]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],S=v||s,P=h||f;if(!C&&!g&&(!S&&!P||r==="vertical"&&P||r==="horizontal"&&S))return null;const O=e?Array.from(e.querySelectorAll(u)):d;if(!O.length)return null;p&&t.preventDefault();let b=null;return P||S?b=Oe(O,o,{goForward:S?s:l==="ltr"?h:f,loop:c}):C?b=O.at(0)||null:g&&(b=O.at(-1)||null),m&&(b==null||b.focus()),b}function Oe(t,o,e,n=t.length){if(--n===0)return null;const r=t.indexOf(o),u=e.goForward?r+1:r-1;if(!e.loop&&(u<0||u>=t.length))return null;const d=(u+t.length)%t.length,c=t[d];return c?c.hasAttribute("disabled")&&c.getAttribute("disabled")!=="false"?Oe(t,c,e,n):c:null}let se=0;function qt(){$e(t=>{var e,n;if(!Ae)return;const o=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",(e=o[0])!=null?e:be()),document.body.insertAdjacentElement("beforeend",(n=o[1])!=null?n:be()),se++,t(()=>{se===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(r=>r.remove()),se--})})}function be(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function Mt(t){const o=Ee("",1e3);return{search:o,handleTypeaheadSearch:(r,u)=>{o.value=o.value+r;{const d=qe(),c=u.map(f=>{var v,s,C,g;return{...f,textValue:(g=(C=(v=f.value)==null?void 0:v.textValue)!=null?C:(s=f.ref.textContent)==null?void 0:s.trim())!=null?g:""}}),l=c.find(f=>f.ref===d),p=c.map(f=>f.textValue),m=wt(p,o.value,l==null?void 0:l.textValue),h=c.find(f=>f.textValue===m);return h&&h.ref.focus(),h==null?void 0:h.ref}},resetTypeahead:()=>{o.value=""}}}function xt(t,o){return t.map((e,n)=>t[(o+n)%t.length])}function wt(t,o,e){const r=o.length>1&&Array.from(o).every(p=>p===o[0])?o[0]:o,u=e?t.indexOf(e):-1;let d=xt(t,Math.max(u,0));r.length===1&&(d=d.filter(p=>p!==e));const l=d.find(p=>p.toLowerCase().startsWith(r.toLowerCase()));return l!==e?l:void 0}var Bt=w({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return(e,n)=>(y(),q(a(Le),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Pt=Bt;function St(){const t=I(!1);return ie(()=>{_e("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),_e(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const It=Ne(St),[ee,kt]=Y(["MenuRoot","MenuSub"],"MenuContext"),[de,Ot]=Y("MenuRoot");var Rt=w({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:o}){const e=t,n=o,{modal:r,dir:u}=J(e),d=Me(u),c=Ke(e,"open",n),l=I(),p=It();return kt({open:c,onOpenChange:m=>{c.value=m},content:l,onContentChange:m=>{l.value=m}}),Ot({onClose:()=>{c.value=!1},isUsingKeyboardRef:p,dir:d,modal:r}),(m,h)=>(y(),q(a(ze),null,{default:_(()=>[x(m.$slots,"default")]),_:3}))}}),Ft=Rt;const[Re,Tt]=Y("MenuContent");var Dt=w({__name:"MenuContentImpl",props:Ve({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...He}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:o}){const e=t,n=o,r=ee(),u=de(),{trapFocus:d,disableOutsidePointerEvents:c,loop:l}=J(e);qt(),Ge(c.value);const p=I(""),m=I(0),h=I(0),f=I(null),v=I("right"),s=I(0),C=I(null),g=I(),{forwardRef:S,currentElement:P}=$(),{handleTypeaheadSearch:O}=Mt();ue(P,i=>{r.onContentChange(i)}),xe(()=>{window.clearTimeout(m.value)});function b(i){var B,K;return v.value===((B=f.value)==null?void 0:B.side)&&Ye(i,(K=f.value)==null?void 0:K.area)}async function A(i){var M;n("openAutoFocus",i),!i.defaultPrevented&&(i.preventDefault(),(M=P.value)==null||M.focus({preventScroll:!0}))}function N(i){var pe,ye;if(i.defaultPrevented)return;const B=i.target.closest("[data-reka-menu-content]")===i.currentTarget,K=i.ctrlKey||i.altKey||i.metaKey,oe=i.key.length===1,j=Ct(i,qe(),P.value,{loop:l.value,arrowKeyOptions:"vertical",dir:u==null?void 0:u.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(j)return j==null?void 0:j.focus();if(i.code==="Space")return;const fe=(ye=(pe=g.value)==null?void 0:pe.getItems())!=null?ye:[];if(B&&(i.key==="Tab"&&i.preventDefault(),!K&&oe&&O(i.key,fe)),i.target!==P.value||!Je.includes(i.key))return;i.preventDefault();const ce=[...fe.map(De=>De.ref)];Qe.includes(i.key)&&ce.reverse(),Ze(ce)}function te(i){var M,B;(B=(M=i==null?void 0:i.currentTarget)==null?void 0:M.contains)!=null&&B.call(M,i.target)||(window.clearTimeout(m.value),p.value="")}function ae(i){var K;if(!re(i))return;const M=i.target,B=s.value!==i.clientX;if((K=i==null?void 0:i.currentTarget)!=null&&K.contains(M)&&B){const oe=i.clientX>s.value?"right":"left";v.value=oe,s.value=i.clientX}}return Tt({onItemEnter:i=>!!b(i),onItemLeave:i=>{var M;b(i)||((M=P.value)==null||M.focus(),C.value=null)},onTriggerLeave:i=>!!b(i),searchRef:p,pointerGraceTimerRef:h,onPointerGraceIntentChange:i=>{f.value=i}}),(i,M)=>(y(),q(a(Xe),{"as-child":"",trapped:a(d),onMountAutoFocus:A,onUnmountAutoFocus:M[7]||(M[7]=B=>n("closeAutoFocus",B))},{default:_(()=>[k(a(Ue),{"as-child":"","disable-outside-pointer-events":a(c),onEscapeKeyDown:M[2]||(M[2]=B=>n("escapeKeyDown",B)),onPointerDownOutside:M[3]||(M[3]=B=>n("pointerDownOutside",B)),onFocusOutside:M[4]||(M[4]=B=>n("focusOutside",B)),onInteractOutside:M[5]||(M[5]=B=>n("interactOutside",B)),onDismiss:M[6]||(M[6]=B=>n("dismiss"))},{default:_(()=>[k(a(gt),{ref_key:"rovingFocusGroupRef",ref:g,"current-tab-stop-id":C.value,"onUpdate:currentTabStopId":M[0]||(M[0]=B=>C.value=B),"as-child":"",orientation:"vertical",dir:a(u).dir.value,loop:a(l),onEntryFocus:M[1]||(M[1]=B=>{n("entryFocus",B),a(u).isUsingKeyboardRef.value||B.preventDefault()})},{default:_(()=>[k(a(We),{ref:a(S),role:"menu",as:i.as,"as-child":i.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":a(je)(a(r).open.value),dir:a(u).dir.value,side:i.side,"side-offset":i.sideOffset,align:i.align,"align-offset":i.alignOffset,"avoid-collisions":i.avoidCollisions,"collision-boundary":i.collisionBoundary,"collision-padding":i.collisionPadding,"arrow-padding":i.arrowPadding,"prioritize-position":i.prioritizePosition,"position-strategy":i.positionStrategy,"update-position-strategy":i.updatePositionStrategy,sticky:i.sticky,"hide-when-detached":i.hideWhenDetached,reference:i.reference,onKeydown:N,onBlur:te,onPointermove:ae},{default:_(()=>[x(i.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Fe=Dt,$t=w({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t,e=Re(),{forwardRef:n}=$(),{CollectionItem:r}=et(),u=I(!1);async function d(l){if(!l.defaultPrevented&&re(l)){if(o.disabled)e.onItemLeave(l);else if(!e.onItemEnter(l)){const m=l.currentTarget;m==null||m.focus({preventScroll:!0})}}}async function c(l){await E(),!l.defaultPrevented&&re(l)&&e.onItemLeave(l)}return(l,p)=>(y(),q(a(r),{value:{textValue:l.textValue}},{default:_(()=>[k(a(W),R({ref:a(n),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":u.value?"":void 0,onPointermove:d,onPointerleave:c,onFocus:p[0]||(p[0]=async m=>{await E(),!(m.defaultPrevented||l.disabled)&&(u.value=!0)}),onBlur:p[1]||(p[1]=async m=>{await E(),!m.defaultPrevented&&(u.value=!1)})}),{default:_(()=>[x(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),At=$t,Et=w({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:o}){const e=t,n=o,{forwardRef:r,currentElement:u}=$(),d=de(),c=Re(),l=I(!1);async function p(){const m=u.value;if(!e.disabled&&m){const h=new CustomEvent(at,{bubbles:!0,cancelable:!0});n("select",h),await E(),h.defaultPrevented?l.value=!1:d.onClose()}}return(m,h)=>(y(),q(At,R(e,{ref:a(r),onClick:p,onPointerdown:h[0]||(h[0]=()=>{l.value=!0}),onPointerup:h[1]||(h[1]=async f=>{var v;await E(),!f.defaultPrevented&&(l.value||(v=f.currentTarget)==null||v.click())}),onKeydown:h[2]||(h[2]=async f=>{const v=a(c).searchRef.value!=="";m.disabled||v&&f.key===" "||a(tt).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:_(()=>[x(m.$slots,"default")]),_:3},16))}}),Lt=Et,Nt=w({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const e=t,n=o,r=z(e,n),u=ee(),{forwardRef:d,currentElement:c}=$();return ot(c),(l,p)=>(y(),q(Fe,R(a(r),{ref:a(d),"trap-focus":a(u).open.value,"disable-outside-pointer-events":a(u).open.value,"disable-outside-scroll":!0,onDismiss:p[0]||(p[0]=m=>a(u).onOpenChange(!1)),onFocusOutside:p[1]||(p[1]=we(m=>n("focusOutside",m),["prevent"]))}),{default:_(()=>[x(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Kt=Nt,zt=w({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const r=z(t,o),u=ee();return(d,c)=>(y(),q(Fe,R(a(r),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:c[0]||(c[0]=l=>a(u).onOpenChange(!1))}),{default:_(()=>[x(d.$slots,"default")]),_:3},16))}}),Vt=zt,Gt=w({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const r=z(t,o),u=ee(),d=de();return(c,l)=>(y(),q(a(nt),{present:c.forceMount||a(u).open.value},{default:_(()=>[a(d).modal.value?(y(),q(Kt,F(R({key:0},{...c.$attrs,...a(r)})),{default:_(()=>[x(c.$slots,"default")]),_:3},16)):(y(),q(Vt,F(R({key:1},{...c.$attrs,...a(r)})),{default:_(()=>[x(c.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Ut=Gt,Wt=w({__name:"MenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return(e,n)=>(y(),q(a(W),R({role:"group"},o),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),jt=Wt,Xt=w({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(t){const o=t;return(e,n)=>(y(),q(a(W),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Ht=Xt,Yt=w({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const o=t;return(e,n)=>(y(),q(a(st),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Jt=Yt,Qt=w({__name:"MenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return(e,n)=>(y(),q(a(W),R(o,{role:"separator","aria-orientation":"horizontal"}),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),Zt=Qt;const[Te,ea]=Y("ContextMenuRoot");var ta=w({inheritAttrs:!1,__name:"ContextMenuRoot",props:{dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:o}){const e=t,n=o,{dir:r,modal:u}=J(e);$();const d=Me(r),c=I(!1),l=I();return ea({open:c,onOpenChange:p=>{c.value=p},dir:d,modal:u,triggerElement:l}),ue(c,p=>{n("update:open",p)}),(p,m)=>(y(),q(a(Ft),{open:c.value,"onUpdate:open":m[0]||(m[0]=h=>c.value=h),dir:a(d),modal:a(u)},{default:_(()=>[x(p.$slots,"default")]),_:3},8,["open","dir","modal"]))}}),aa=ta,oa=w({__name:"ContextMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1,default:0},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:o}){const r=z(t,o);$();const u=Te(),d=I(!1);return(c,l)=>(y(),q(a(Ut),R(a(r),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:l[0]||(l[0]=p=>{!p.defaultPrevented&&d.value&&p.preventDefault(),d.value=!1}),onInteractOutside:l[1]||(l[1]=p=>{p.detail.originalEvent.button===2&&p.target===a(u).triggerElement.value&&p.preventDefault(),!p.defaultPrevented&&!a(u).modal.value&&(d.value=!0)})}),{default:_(()=>[x(c.$slots,"default")]),_:3},16))}}),na=oa,sa=w({__name:"ContextMenuGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return $(),(e,n)=>(y(),q(a(jt),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),ra=sa,la=w({__name:"ContextMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:o}){const e=t,r=rt(o);return $(),(u,d)=>(y(),q(a(Lt),F(D({...e,...a(r)})),{default:_(()=>[x(u.$slots,"default")]),_:3},16))}}),ia=la,ua=w({__name:"ContextMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return $(),(e,n)=>(y(),q(a(Ht),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),da=ua,fa=w({__name:"ContextMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const o=t;return(e,n)=>(y(),q(a(Jt),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),ca=fa,pa=w({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const o=t;return $(),(e,n)=>(y(),q(a(Zt),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),ya=pa;function he(t){return t.pointerType!=="mouse"}var _a=w({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const o=t,{disabled:e}=J(o),{forwardRef:n,currentElement:r}=$(),u=Te(),d=I({x:0,y:0}),c=X(()=>({getBoundingClientRect:()=>({width:0,height:0,left:d.value.x,right:d.value.x,top:d.value.y,bottom:d.value.y,...d.value})})),l=I(0);function p(){window.clearTimeout(l.value)}function m(s){d.value={x:s.clientX,y:s.clientY},u.onOpenChange(!0)}async function h(s){e.value||(await E(),s.defaultPrevented||(p(),m(s),s.preventDefault()))}async function f(s){e.value||(await E(),he(s)&&!s.defaultPrevented&&(p(),l.value=window.setTimeout(()=>m(s),700)))}async function v(s){e.value||(await E(),he(s)&&!s.defaultPrevented&&p())}return ie(()=>{r.value&&(u.triggerElement.value=r.value)}),(s,C)=>(y(),T(V,null,[k(a(Pt),{as:"template",reference:c.value},null,8,["reference"]),k(a(W),R({ref:a(n),as:s.as,"as-child":s.asChild,"data-state":a(u).open.value?"open":"closed","data-disabled":a(e)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},s.$attrs,{onContextmenu:h,onPointerdown:f,onPointermove:v,onPointercancel:v,onPointerup:v}),{default:_(()=>[x(s.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),ma=_a;const va=w({__name:"ContextMenu",props:{dir:{},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:o}){const r=z(t,o);return(u,d)=>(y(),q(a(aa),F(D(a(r))),{default:_(()=>[x(u.$slots,"default")]),_:3},16))}}),ga=w({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideFlip:{type:Boolean},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:o}){const e=t,n=o,r=Q(e,"class"),u=z(r,n);return(d,c)=>(y(),q(a(ca),null,{default:_(()=>[k(a(na),R(a(u),{class:a(Z)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:_(()=>[x(d.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ba=w({__name:"ContextMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(t){const o=t;return(e,n)=>(y(),q(a(ra),F(D(o)),{default:_(()=>[x(e.$slots,"default")]),_:3},16))}}),ha=w({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(t,{emit:o}){const e=t,n=o,r=Q(e,"class"),u=z(r,n);return(d,c)=>(y(),q(a(ia),R(a(u),{class:a(Z)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d.inset&&"pl-8",e.class)}),{default:_(()=>[x(d.$slots,"default")]),_:3},16,["class"]))}}),Ca=w({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(t){const o=t,e=Q(o,"class");return(n,r)=>(y(),q(a(da),R(a(e),{class:a(Z)("px-2 py-1.5 text-sm font-semibold text-foreground",n.inset&&"pl-8",o.class)}),{default:_(()=>[x(n.$slots,"default")]),_:3},16,["class"]))}}),Ce=w({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const o=t,e=Q(o,"class");return(n,r)=>(y(),q(a(ya),R(a(e),{class:a(Z)("-mx-1 my-1 h-px bg-border",o.class)}),null,16,["class"]))}}),qa=w({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const e=lt(t);return(n,r)=>(y(),q(a(ma),F(D(a(e))),{default:_(()=>[x(n.$slots,"default")]),_:3},16))}}),Ma={key:0,class:"size-4 flex-center"},xa=w({name:"FaContextMenu",__name:"index",props:{items:{}},setup(t){const o=t,e=it(),n=X(()=>o.items.map(d=>d.filter(c=>!c.hide)).filter(d=>d.length)),r=X(()=>n.value.some(d=>d.some(c=>c.icon)));function u(d){var c;(c=d.handle)==null||c.call(d)}return(d,c)=>{const l=Pe;return y(),q(a(va),{modal:!1},{default:_(()=>[k(a(qa),{"as-child":""},{default:_(()=>[x(d.$slots,"default")]),_:3}),k(a(ga),{class:"z-2050"},{default:_(()=>[e.label?(y(),T(V,{key:0},[k(a(Ca),null,{default:_(()=>[x(d.$slots,"label")]),_:3}),k(a(Ce))],64)):G("",!0),(y(!0),T(V,null,le(a(n),(p,m)=>(y(),T(V,{key:m},[k(a(ba),null,{default:_(()=>[(y(!0),T(V,null,le(p,(h,f)=>(y(),q(a(ha),{key:f,disabled:h.disabled,class:"cursor-pointer",onClick:v=>u(h)},{default:_(()=>[a(r)?(y(),T("div",Ma,[h.icon?(y(),q(l,{key:0,name:h.icon,class:"size-4"},null,8,["name"])):G("",!0)])):G("",!0),Be(" "+U(h.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:2},1024),m!==a(n).length-1?(y(),q(a(Ce),{key:0})):G("",!0)],64))),128))]),_:3})]),_:3})}}});function wa(){const t=Ie(),o=ke(),e=Se();function n(){return t.path}function r(f=n()){if(l(f,!1)){const v=n();if(f===v){const s=e.list.findIndex(C=>C.tabId===f);s>0?o.close(e.list[s-1].fullPath):o.close(e.list[s+1].fullPath)}else e.remove(f)}}function u(f=n()){const v=n();if(f!==v){const s=e.list.findIndex(C=>C.tabId===f);o.push(e.list[s].fullPath)}e.removeOtherSide(f)}function d(f=n()){const v=n();if(f!==v){const s=e.list.findIndex(g=>g.tabId===f);e.list.findIndex(g=>g.tabId===v)<s&&o.push(e.list[s].fullPath)}e.removeLeftSide(f)}function c(f=n()){const v=n();if(f!==v){const s=e.list.findIndex(g=>g.tabId===f);e.list.findIndex(g=>g.tabId===v)>s&&o.push(e.list[s].fullPath)}e.removeRightSide(f)}function l(f=n(),v=!0){let s=!0;return e.list.findIndex(g=>g.tabId===f)<0?(s=!1,!v&&H.warning("关闭的标签页不存在",{position:"top-center"})):e.list.length<=1&&(s=!1,!v&&H.warning("当前只有一个标签页，不可关闭",{position:"top-center"})),s}function p(f=n()){return e.list.some(v=>v.tabId!==f)}function m(f=n()){var s;let v=!0;if(f===((s=e.list[0])==null?void 0:s.tabId))v=!1;else{const C=e.list.findIndex(g=>g.tabId===f);v=e.list.some((g,S)=>S<C&&g.tabId!==f)}return v}function h(f=n()){var s;let v=!0;if(f===((s=e.list.at(-1))==null?void 0:s.tabId))v=!1;else{const C=e.list.findIndex(g=>g.tabId===f);v=e.list.some((g,S)=>S>=C&&g.tabId!==f)}return v}return{getId:n,close,closeById:r,closeOtherSide:u,closeLeftSide:d,closeRightSide:c,checkClose:l,checkCloseOtherSide:p,checkCloseLeftSide:m,checkCloseRightSide:h}}const Ba={class:"tabbar"},Pa={class:"tabbar-container"},Sa=["data-index","onClick"],Ia={class:"size-full"},ka={class:"tab-content"},Oa=["onClick"],Ra={class:"text-sm"},Fa={class:"text-accent-foreground/50"},Ta=w({name:"Tabbar",__name:"index",setup(t){const o=Ie(),e=ke(),n=ut(),r=Se(),u=wa(),d=bt(),c=dt({reactive:!0}),l=X(()=>u.getId()),p=ne("tabsRef"),m=ne("tabContainerRef"),h=ne("tabRef");ue(()=>o,s=>{n.settings.tabbar.enable&&(r.add(s),E(()=>{var g,S,P,O;const C=r.list.findIndex(b=>b.tabId===l.value);if(C!==-1){const b=(g=h.value)==null?void 0:g.find(N=>Number.parseInt(N.dataset.index)===C),A=(P=(S=p.value)==null?void 0:S.ref)==null?void 0:P.$el;if(b&&A){const N=b.offsetLeft,te=b.offsetWidth,ae=A.clientWidth,i=N-(ae-te)/2;(O=p.value)==null||O.scrollTo(i)}f()}}))},{immediate:!0,deep:!0});function f(){var s,C,g,S;if(((s=m.value)==null?void 0:s.$el.clientWidth)>((S=(g=(C=p.value)==null?void 0:C.ref)==null?void 0:g.$el.clientWidth)!=null?S:0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const P=H.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>H.dismiss(P)}})}}function v(s){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:s.tabId!==l.value,handle:()=>d.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:r.list.length<=1,handle:()=>u.closeById(s.tabId)}],[{label:"关闭其他标签页",icon:"i-mdi:close",disabled:!u.checkCloseOtherSide(s.tabId),handle:()=>u.closeOtherSide(s.tabId)},{label:"关闭左侧标签页",icon:"i-mdi:arrow-expand-left",disabled:!u.checkCloseLeftSide(s.tabId),handle:()=>u.closeLeftSide(s.tabId)},{label:"关闭右侧标签页",icon:"i-mdi:arrow-expand-right",disabled:!u.checkCloseRightSide(s.tabId),handle:()=>u.closeRightSide(s.tabId)}]]}return ie(()=>{me("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(s,C)=>{var g,S;if(n.settings.tabbar.enable&&n.settings.tabbar.enableHotkeys)switch(s.preventDefault(),C.key){case"alt+left":if(r.list[0].tabId!==l.value){const P=r.list.findIndex(O=>O.tabId===l.value);e.push(r.list[P-1].fullPath)}break;case"alt+right":if(((g=r.list.at(-1))==null?void 0:g.tabId)!==l.value){const P=r.list.findIndex(O=>O.tabId===l.value);e.push(r.list[P+1].fullPath)}break;case"alt+w":u.closeById(l.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const P=Number(C.key.split("+")[1]);(S=r.list[P-1])!=null&&S.fullPath&&e.push(r.list[P-1].fullPath);break}case"alt+0":e.push(r.list[r.list.length-1].fullPath);break}})}),xe(()=>{me.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(s,C)=>{const g=Pe,S=yt,P=xa,O=ft;return y(),T("div",Ba,[(y(),q(ve(a(ge)("tabbar-start")))),L("div",Pa,[k(O,{ref_key:"tabsRef",ref:p,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:_(()=>[k(ct,{ref_key:"tabContainerRef",ref:m,name:"tabbar",tag:"div",class:"tab-container"},{default:_(()=>[(y(!0),T(V,null,le(a(r).list,(b,A)=>(y(),T("div",{key:b.tabId,ref_for:!0,ref_key:"tabRef",ref:h,"data-index":A,class:pt(["tab",{actived:b.tabId===a(l)}]),onClick:N=>a(e).push(b.fullPath)},[k(P,{items:v(b)},{default:_(()=>[L("div",Ia,[C[0]||(C[0]=L("div",{class:"tab-dividers"},null,-1)),C[1]||(C[1]=L("div",{class:"tab-background"},null,-1)),k(S,{delay:1e3,side:"bottom"},{content:_(()=>[L("div",Ra,U(typeof(b==null?void 0:b.title)=="function"?b.title():b.title),1),L("div",Fa,U(b.fullPath),1)]),default:_(()=>[L("div",ka,[(y(),T("div",{key:b.tabId,class:"title"},[a(n).settings.tabbar.enableIcon&&b.icon?(y(),q(g,{key:0,name:b.icon,class:"icon"},null,8,["name"])):G("",!0),Be(" "+U(typeof(b==null?void 0:b.title)=="function"?b.title():b.title),1)])),a(r).list.length>1?(y(),T("div",{key:0,class:"action-icon",onClick:we(N=>a(u).closeById(b.tabId),["stop"])},[k(g,{name:"i-ri:close-fill"})],8,Oa)):G("",!0),_t(L("div",{class:"hotkey-number"},U(A+1),513),[[mt,a(c).alt&&A<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,Sa))),128))]),_:1},512)]),_:1},512)]),(y(),q(ve(a(ge)("tabbar-end"))))])}}}),La=vt(Ta,[["__scopeId","data-v-db64162a"]]);export{La as default};
